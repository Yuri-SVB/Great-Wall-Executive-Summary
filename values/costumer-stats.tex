%% ================= Customer Metrics =================
% New subscribers in given year (includes viral growth).
\newcommand{\newSubsYearOne}{\fpeval{round(\baseNewSubsYearOne * \viralMultiplierYearOne, 0)}}
\newcommand{\newSubsYearTwo}{\fpeval{round(\baseNewSubsYearTwo * \viralMultiplierYearTwo, 0)}}
\newcommand{\newSubsYearThree}{\fpeval{round(\baseNewSubsYearThree * \viralMultiplierYearThree, 0)}}

% Hardware customers in given year (includes viral growth).
\newcommand{\hwCustomersYearTwo}{\fpeval{round(\baseHwCustomersYearTwo * \viralMultiplierYearTwo, 0)}}
\newcommand{\hwCustomersYearThree}{\fpeval{round(\baseHwCustomersYearThree * \viralMultiplierYearThree, 0)}}

% Total active subscribers at end of year (count).
% Year 1: New subscribers only
\newcommand{\totalSubsYearOne}{\fpeval{round(\newSubsYearOne, 0)}}

% Year 2: Year 1 × retention + new subscribers
\newcommand{\totalSubsYearTwo}{\fpeval{round(\totalSubsYearOne * (1 - \churnYearOne/100) + \newSubsYearTwo, 0)}}

% Year 3: Year 2 × retention + new subscribers
\newcommand{\totalSubsYearThree}{\fpeval{round(\totalSubsYearTwo * (1 - \churnYearTwo/100) + \newSubsYearThree, 0)}}

%% ================= Churn =================
% ANNUAL churn rate (%).
\newcommand{\churnYearOne}{5}

% ANNUAL churn rate (%).
\newcommand{\churnYearThree}{4}

% ANNUAL churn rate (%).
\newcommand{\churnYearTwo}{4.5}

%% ================= Viral Marketing & Network Effects =================
% Provider referral coefficient (providers incentivized to bring clients)
% Higher coefficient since providers aren't anonymous and can publicly promote
% Based on Airbnb host referral data (HBS 2016): 0.2-0.3 range
\newcommand{\providerViralCoeff}{0.25}

% Annual viral growth factor (compounds as network grows)
% Conservative based on NFX (2018) marketplace research
\newcommand{\viralGrowthFactor}{1.10}

% CAC reduction from viral effects by year (%)
% Based on CB Insights (2021) marketplace platform studies
% Conservative estimates aligned with Kumar et al. (2007) WoM research
\newcommand{\cacViralReductionYearOne}{8}
\newcommand{\cacViralReductionYearTwo}{18}
\newcommand{\cacViralReductionYearThree}{30}

%% ================= Annual Marketing Budgets =================
% Year 1 marketing budget (from seed round)
\newcommand{\marketingBudgetYearOne}{80000}

% Year 2 marketing budget (seed remainder + Series A portion)
\newcommand{\marketingBudgetYearTwo}{120000}

% Year 3 marketing budget (Series A remainder + revenue reinvestment)
\newcommand{\marketingBudgetYearThree}{150000}

%% ================= Customer Acquisition Efficiency =================
% Customers acquired per $1000 marketing spend (improves with scale)
\newcommand{\custPerThousandYearOne}{100}
\newcommand{\custPerThousandYearTwo}{75}  % Decreases as early adopters exhausted
\newcommand{\custPerThousandYearThree}{60}

%% ================= Base Customer Acquisition (before viral) =================
% Base new customers from paid acquisition (marketing budget / CAC)
\newcommand{\baseNewSubsYearOne}{\fpeval{round(\marketingBudgetYearOne / \cacDigital, 0)}}
\newcommand{\baseNewSubsYearTwo}{\fpeval{round(\marketingBudgetYearTwo / \cacDigital, 0)}}
\newcommand{\baseNewSubsYearThree}{\fpeval{round(\marketingBudgetYearThree / \cacDigital, 0)}}

% Base hardware customers from paid acquisition
\newcommand{\baseHwCustomersYearTwo}{800}
\newcommand{\baseHwCustomersYearThree}{1500}

%% ================= Viral Customer Growth =================
% Viral multiplier per year (1 + viral coefficient × existing base × adoption rate)
% Year 1: Limited viral effect as network builds
\newcommand{\viralMultiplierYearOne}{\fpeval{1 + \providerViralCoeff * 0.2}}

% Year 2: Growing viral effect with proven providers
\newcommand{\viralMultiplierYearTwo}{\fpeval{1 + \providerViralCoeff * 0.5}}

% Year 3: Strong viral effect with established network
\newcommand{\viralMultiplierYearThree}{\fpeval{1 + \providerViralCoeff * 0.8}}

%% ================= CAC & Offsets =================
% Customer Acquisition Cost component (USD per acquired customer).
\newcommand{\cacContent}{18}

% Customer Acquisition Cost component (USD per acquired customer).
\newcommand{\cacDigital}{20}

% Customer Acquisition Cost component (USD per acquired customer).
\newcommand{\cacEvents}{60}

%% ================= Adjusted CAC with Viral Effects =================
% Effective CAC after viral reduction
\newcommand{\effectiveCACYearOne}{\fpeval{\cacDigital * (1 - \cacViralReductionYearOne/100)}}
\newcommand{\effectiveCACYearTwo}{\fpeval{\cacDigital * (1 - \cacViralReductionYearTwo/100)}}
\newcommand{\effectiveCACYearThree}{\fpeval{\cacDigital * (1 - \cacViralReductionYearThree/100)}}
